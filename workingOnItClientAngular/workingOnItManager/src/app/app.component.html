<!-- מוצג רק אם המשתמש מחובר וגם אדמין -->
@if (isAuthenticated() && isAdmin()) {
  <div class="app-container">
    <mat-toolbar class="app-toolbar">
      <button mat-icon-button (click)="toggleSidenav()" class="menu-button">
        <mat-icon>menu</mat-icon>
      </button>
      <div class="logo-section">
        <img src="assets/logo.png" alt="WOW Logo" class="logo" onerror="this.style.display='none'">
        <span class="app-title">workingOnIt (wow) - Admin Dashboard</span>
      </div>
      <span class="spacer"></span>
      <div class="user-section">
        <span class="admin-badge">
          <mat-icon>admin_panel_settings</mat-icon>
          Admin: {{ getCurrentUserName() }}
        </span>
        <button mat-button (click)="logout()" class="logout-button">
          <mat-icon>logout</mat-icon>
          Logout
        </button>
      </div>
    </mat-toolbar>

    <mat-sidenav-container class="sidenav-container">
      <mat-sidenav #sidenav mode="side" opened class="sidenav">
        <div class="sidenav-header">
          <h3>Navigation</h3>
        </div>
        <mat-nav-list>
          <a mat-list-item 
             (click)="navigateTo('/dashboard')" 
             routerLink="/dashboard" 
             routerLinkActive="active"
             class="nav-item">
            <mat-icon matListItemIcon>dashboard</mat-icon>
            <span matListItemTitle>Dashboard</span>
          </a>
          <a mat-list-item 
             (click)="navigateTo('/users')" 
             routerLink="/users" 
             routerLinkActive="active"
             class="nav-item">
            <mat-icon matListItemIcon>people</mat-icon>
            <span matListItemTitle>User Management</span>
          </a>
          <a mat-list-item 
             (click)="navigateTo('/analytics')" 
             routerLink="/analytics" 
             routerLinkActive="active"
             class="nav-item">
            <mat-icon matListItemIcon>analytics</mat-icon>
            <span matListItemTitle>Analytics</span>
          </a>
        </mat-nav-list>
      </mat-sidenav>

      <mat-sidenav-content class="main-content">
        <div class="content-wrapper">
          <router-outlet></router-outlet>
        </div>
      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>
} @else {
  <div class="login-container">
    <router-outlet></router-outlet>
  </div>
}